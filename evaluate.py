from sklearn.metrics import f1_score

# data = {
#     "image1_score": {
#         "label1": 932.728111743927,
#         "label2": 33.76118838787079,
#         "label3": 30.969547107815742,
#         "label4": 2.541112247854471,
#     },
#     "image2_score": {
#         "label1": 595.8223342895508,
#         "label2": 368.14263463020325,
#         "label3": 21.272342652082443,
#         "label4": 14.762713573873043,
#     },
#     "image3_score": {
#         "label1": 882.0712566375732,
#         "label2": 102.07736492156982,
#         "label3": 14.983244240283966,
#         "label4": 0.8681032340973616,
#     },
#     "image4_score": {
#         "label1": 870.5176115036011,
#         "label2": 128.5184621810913,
#         "label3": 0.8146483451128006,
#         "label4": 0.14925736468285322,
#     },
# }
data = {
    "image1_score": {
        "label1": 969.3500399589539,
        "label2": 20.824531093239784,
        "label3": 3.1047919765114784,
        "label4": 2.409138949587941,
        "label5": 1.5652155270799994,
        "label6": 1.5345084248110652,
        "label7": 0.7498865015804768,
        "label8": 0.2924066793639213,
        "label9": 0.14578891568817198,
        "label10": 0.023782595235388726,
    },
    "image2_score": {
        "label1": 410.9475910663605,
        "label2": 253.78906726837158,
        "label3": 197.8902816772461,
        "label4": 55.16090989112854,
        "label5": 41.543953120708466,
        "label6": 17.061607912182808,
        "label7": 13.125627301633358,
        "label8": 8.019357919692993,
        "label9": 2.2271033376455307,
        "label10": 0.23456399503629655,
    },
    "image3_score": {
        "label1": 899.5612859725952,
        "label2": 75.6632536649704,
        "label3": 11.16167102009058,
        "label4": 5.587554071098566,
        "label5": 3.589167958125472,
        "label6": 2.577617997303605,
        "label7": 0.7829820387996733,
        "label8": 0.7277094991877675,
        "label9": 0.2762342628557235,
        "label10": 0.07248015754157677,
    },
    "image4_score": {
        "label1": 524.7419476509094,
        "label2": 204.2691707611084,
        "label3": 199.23987984657288,
        "label4": 25.689486414194107,
        "label5": 25.007717311382294,
        "label6": 9.333834983408451,
        "label7": 6.8840449675917625,
        "label8": 2.530330792069435,
        "label9": 2.288930118083954,
        "label10": 0.01469549533794634,
    },
    "image5_score": {
        "label1": 990.1738166809082,
        "label2": 4.350036382675171,
        "label3": 2.1342711988836527,
        "label4": 1.3848053058609366,
        "label5": 0.8359201601706445,
        "label6": 0.43176888721063733,
        "label7": 0.36169757368043065,
        "label8": 0.3148062387481332,
        "label9": 0.008834222171572037,
        "label10": 0.004035301117255585,
    },
    "image6_score": {
        "label1": 714.5559787750244,
        "label2": 173.78686368465424,
        "label3": 94.32242065668106,
        "label4": 8.960291743278503,
        "label5": 4.924202803522348,
        "label6": 1.6618367517367005,
        "label7": 1.3439827598631382,
        "label8": 0.2774613385554403,
        "label9": 0.08570060163037851,
        "label10": 0.08122958388412371,
    },
    "image7_score": {
        "label1": 948.1136202812195,
        "label2": 17.11474545300007,
        "label3": 13.550606556236744,
        "label4": 9.74956713616848,
        "label5": 8.063043467700481,
        "label6": 2.168673789128661,
        "label7": 0.7609146414324641,
        "label8": 0.2811453596223146,
        "label9": 0.15586495283059776,
        "label10": 0.04176422589807771,
    },
    "image8_score": {
        "label1": 551.7884492874146,
        "label2": 289.3419563770294,
        "label3": 133.13709199428558,
        "label4": 17.99898035824299,
        "label5": 5.350988823920488,
        "label6": 1.132698031142354,
        "label7": 0.6245629629120231,
        "label8": 0.3341578703839332,
        "label9": 0.2631493844091892,
        "label10": 0.02798269451886881,
    },
    "image9_score": {
        "label1": 270.81483602523804,
        "label2": 255.5859386920929,
        "label3": 254.3565332889557,
        "label4": 86.57743781805038,
        "label5": 82.97012001276016,
        "label6": 33.870212733745575,
        "label7": 15.007242560386658,
        "label8": 0.45959794078953564,
        "label9": 0.2331771538592875,
        "label10": 0.12486003106459975,
    },
    "image10_score": {
        "label1": 899.1844058036804,
        "label2": 68.21490824222565,
        "label3": 29.80458177626133,
        "label4": 1.001012627966702,
        "label5": 0.5800127401016653,
        "label6": 0.42232131818309426,
        "label7": 0.42106900946237147,
        "label8": 0.3606426471378654,
        "label9": 0.006064567060093395,
        "label10": 0.004950151833327254,
    },
}
for key in data.keys():
    data[key] = {k: int(v) for k, v in data[key].items()}

# y_true = []
# y_pred = []
# for i in range(10):
#     for j in range(10):
#         count = int(data["image" + str(i + 1) + "_score"]["label" + str(j + 1)] * 1000)
#         y_true += [i] * count
#         y_pred += [j] * count
# f1_scores = f1_score(y_true, y_pred, average=None)
# print(f1_scores)

f1_scores = []
for j in range(10):
    p_jj = data["image" + str(j + 1) + "_score"]["label" + str(j + 1)]
    sum_i = sum(
        data["image" + str(i + 1) + "_score"]["label" + str(j + 1)] for i in range(10)
    )
    precision = p_jj / sum_i if sum_i != 0 else 0
    recall = p_jj
    if precision + recall != 0:
        f1_scores.append((2 * precision * recall) / (precision + recall))
    else:
        f1_scores.append(0)
print(f1_scores)
